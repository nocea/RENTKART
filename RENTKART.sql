DROP DATABASE IF EXISTS RENTKART;
CREATE DATABASE RENTKART;
USE RENTKART;
DROP TABLE IF EXISTS USUARIOS;
CREATE TABLE USUARIOS
(
    ID INT(9) NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(256)NULL,
    APELLIDOS VARCHAR(256)NULL,
    PRIMARY KEY(ID)
)ENGINE=InnoDB;

DROP TABLE IF EXISTS CIRCUITOS;
CREATE TABLE CIRCUITOS
(
    ID INT(9) NOT NULL AUTO_INCREMENT,
    NOMBRE_CIRCUITO VARCHAR(256)NULL,
    UBICACION_CIRCUITO VARCHAR(256)NULL,
    LONGITUD INT(9)NULL,
    PRIMARY KEY(ID)
)ENGINE=InnoDB;

DROP TABLE IF EXISTS TARIFAS;
CREATE TABLE TARIFAS(
	ID INT(9) NOT NULL AUTO_INCREMENT,
	NUM_DIAS INT(9)NULL,
	PRECIO INT(9)NULL,
	PRIMARY KEY(ID)
)ENGINE=InnoDB;

DROP TABLE IF EXISTS KARTS;
CREATE TABLE KARTS(
	ID INT(9) NOT NULL AUTO_INCREMENT,
	VELOCIDAD_MAX INT(9)NULL,
	COLOR VARCHAR(256)NULL,
	PRIMARY KEY(ID)
)ENGINE=InnoDB;

DROP TABLE IF EXISTS ALQUILERES;
CREATE TABLE ALQUILERES(
	ID INT(9) NOT NULL  AUTO_INCREMENT,
	ID_TARIFAS INT(9)DEFAULT NULL,
	ID_KART INT(9)DEFAULT NULL,
	ID_USUARIO INT(9)DEFAULT NULL,
	PRIMARY KEY(ID),
	CONSTRAINT tarifas_alquiler FOREIGN KEY (ID_TARIFAS) REFERENCES TARIFAS(ID),
	CONSTRAINT kart_alquiler FOREIGN KEY (ID_KART) REFERENCES KARTS(ID),
	CONSTRAINT usuario_alquiler FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
)ENGINE=InnoDB;
DROP TABLE IF EXISTS CARRERAS;
CREATE TABLE CARRERAS(
	ID INT(9) NOT NULL AUTO_INCREMENT,
	FECHA_HORA DATETIME DEFAULT NULL,
	ID_USUARIO INT(9) DEFAULT NULL,
	ID_CIRCUITO INT(9) DEFAULT NULL,
	PRIMARY KEY(ID),
	CONSTRAINT usuario_carreras FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID),
	CONSTRAINT circuito_carreras FOREIGN KEY(ID_CIRCUITO) REFERENCES CIRCUITOS(ID)
)ENGINE=InnoDB;
DROP TABLE IF EXISTS CLASIFICACIONES;
CREATE TABLE CLASIFICACIONES(
	ID INT(9)NOT NULL AUTO_INCREMENT,
	TIEMPO TIME DEFAULT NULL,
	ID_USUARIO INT(9) DEFAULT NULL,
	ID_CARRERA INT(9) DEFAULT NULL,
	PRIMARY KEY(ID),
	CONSTRAINT usuario_clasificaciones FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID),
	CONSTRAINT carreras_clasificaciones FOREIGN KEY(ID_CARRERA) REFERENCES CARRERAS(ID)
)ENGINE=InnoDB;
DROP TABLE IF EXISTS CARR_HAS_KAR;
CREATE TABLE CARR_HAS_KAR(
	ID INT(9) NOT NULL AUTO_INCREMENT,
	ID_CARRERA INT(9) DEFAULT NULL,
	ID_KART INT(9) DEFAULT NULL,
	PRIMARY KEY(ID),
	CONSTRAINT carrera_chk FOREIGN KEY (ID_CARRERA) REFERENCES CARRERAS(ID),
	CONSTRAINT kart_chk FOREIGN KEY (ID_KART) REFERENCES KARTS(ID)
)ENGINE=InnoDB;